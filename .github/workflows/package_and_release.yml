name: Package and release

on: [push, pull_request]

jobs:
  lint:
    uses: ./.github/workflows/lint.yml@main
  deploy:
    needs: lint
    uses: ./.github/workflows/deploy.yml@main
    environment: production
    secrets: inherit
  status:
    needs: [lint, deploy]
    if: ${{ failure() }}
    uses: ./.github/workflows/status.yml@main
    secrets: inherit
